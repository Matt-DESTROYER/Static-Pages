<!DOCTYPE html>
<html>

<head lang="en-au">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="theme-color" content="#000000">
	<title>ＨＵＧＥ Heart ˢᵐᵃˡˡ Body</title>
	<link rel="manifest" href="manifest.webmanifest" />
	<script type="text/javascript" src="register-sw.js"></script>
	<!-- Copyright Matthew James, 2021 -->
	<style>
		* {
			margin: 0px;
			overflow: hidden;
		}
	</style>
	<script type="text/javascript">
		// tools
		const sineWave=(t,e)=>Math.sin(Date.now()/(180*t)*Math.PI)*e,cursor=t=>canvas.style.cursor=t,currentTime=t=>Date.now()-startTime,timeTaken=t=>endTime-startTime,dist=(t,e,n,s)=>Math.sqrt(Math.pow(n-t,2)+Math.pow(s-e,2)),angleBetween=(t,e,n,s,a=!0)=>Math.atan2(s-e,n-t)*(a?180/Math.PI:1),angleToMouse=(t,e,n=!0)=>angleBetween(t,e,Input.mouseX,Input.mouseY,n),translatePoint=(t,e,n,s)=>[t+Math.sin(n)*s,e+Math.cos(n)*s],repeat=(t=function(){},e=1)=>{try{for(let n=0;n<e;n++)t();return!0}catch(t){return!1}},clamp=(t,e,n)=>t<e?e:t>n?n:t;function getLines(t,e){let n=t.split(" "),s=[],a="";for(let t=0;t<n.length;t++)if(n[t].indexOf("\n")>-1){let r=n[t].split("\n");ctx.measureText(a+" "+r[0]).width<e?(s.push(a+" "+r[0]),n[t]=n[t].substr(n[t].indexOf("\n")+1),a="",t--):(s.push(a,r[0]),n[t]=n[t].substr(n[t].indexOf("\n")+1),a="",t--)}else ctx.measureText(a+" "+n[t]).width<e?a+=(""===a?"":" ")+n[t]:(s.push(a),a=n[t]);return s.push(a),s}
		// scene
		class Scene{constructor(t,a){this.gameObjects=t,this.camera=a,this.started=!1}start(){this.camera.start(),this.gameObjects.forEach(t=>t.start()),this.started=!0}destroy(e){return this.gameObjects.splice(this.gameObjects.indexOf(e))}update(){this.camera.update(),this.gameObjects.sort((t,e)=>t.layer<e.layer?-1:1),this.gameObjects.forEach(t=>t.enabled&&t.update())}render(){ctx.save(),ctx.translate(canvas.width/2-this.camera.x,canvas.height/2-this.camera.y),this.gameObjects.forEach(t=>t.enabled&&t.render()),ctx.restore()}}
		// gameobject
		class GameObject{constructor(t,s,e,h,i=function(){},o=function(){},r=!1){this.x=t,this.y=s,this.mesh=e,"string"==typeof h?(this.colour=h,this.render=function(){this.readyMesh(),this.mesh.rotate(this.rotation),this.mesh.render(this.colour),this.mesh.rotate(-this.rotation),this.resetMesh()}):this.render=h,this.rotation=0,this.layer=1,this.enabled=!0,this.start=i,this.update=o,this.collides=r}readyMesh(){this.mesh.move(this.x,this.y)}resetMesh(){this.mesh.move(-this.x,-this.y)}collision(t){this.readyMesh(),this.mesh.rotate(this.rotation);let s=this.mesh.collision(t);return this.mesh.rotate(-this.rotation),this.resetMesh(),s}changeX(t){this.x+=t,this.collides&&(t/=Math.abs(t),scenes[currentScene].gameObjects.forEach(s=>{if(s!==this&&s.collides){if(s.readyMesh(),s.mesh.rotate(s.rotation),this.collision(s.mesh))for(0===t&&(this.readyMesh(),this.mesh.rotate(this.rotation),t=this.mesh.midPoint().x>s.mesh.midPoint().x?1:-1,this.mesh.rotate(-this.rotation),this.resetMesh());this.collision(s.mesh);)this.x-=t;s.mesh.rotate(-s.rotation),s.resetMesh()}}))}changeY(t){this.y+=t,this.collides&&(t/=Math.abs(t),scenes[currentScene].gameObjects.forEach(s=>{if(s!==this&&s.collides){if(s.readyMesh(),s.mesh.rotate(s.rotation),this.collision(s.mesh))for(0===t&&(this.readyMesh(),this.mesh.rotate(this.rotation),t=this.mesh.midPoint().y>s.mesh.midPoint().y?1:-1,this.mesh.rotate(-this.rotation),this.resetMesh());this.collision(s.mesh);)this.y-=t;s.mesh.rotate(-s.rotation),s.resetMesh()}}))}}
		// camera
		class Camera{constructor(t,s,i=function(){},h=function(){}){this.x=t,this.y=s,this.start=i,this.update=h}smoothMove(t,s,i){this.x=lerp(this.x,t,i),this.y=lerp(this.y,s,i)}}
		// polygonmesh
		class PolygonMesh{constructor(t){this.lines=[],this.maxX=0;for(let i=0;i<t.length-1;i++)this.maxX+=Math.abs(t[i].x),this.maxX+=Math.abs(t[i+1].x),this.lines.push(new Line(t[i],t[i+1]));this.lines.push(new Line(t[t.length-1],t[0])),this.maxX*=10}changeX(t){this.lines.map(i=>{i.x1+=t,i.x2+=t,i.point1.x+=t,i.point2.x+=t}),this.maxX+=t}changeY(t){this.lines.map(i=>{i.y1+=t,i.y2+=t,i.point1.y+=t,i.point2.y+=t})}move(t,i){this.changeX(t),this.changeY(i)}getMidpoint(){let t=new Vector2(0,0);return this.lines.forEach(i=>t.add(i.point1)),t.x/=this.lines.length,t.y/=this.lines.length,t}resetMesh(){let t=this.getMidpoint();this.move(-t.x,-t.y)}rotate(t){let i=this.getMidpoint();this.changeX(-i.x),this.changeY(-i.y),this.lines.forEach(i=>{let e=i.x1,s=i.y1;i.x1=e*Math.cos(t)-s*Math.sin(t),i.y1=e*Math.sin(t)+s*Math.cos(t),this.maxX=Math.max(this.maxX,i.x1),e=i.x2,s=i.y2,i.x2=e*Math.cos(t)-s*Math.sin(t),i.y2=e*Math.sin(t)+s*Math.cos(t),this.maxX=Math.max(this.maxX,i.x2)}),this.changeX(i.x),this.changeY(i.y)}pointInPolygon(t){let i=new Line(t,new Vector2(10*this.maxX,t.y)),e=!1;return this.lines.forEach(t=>e=t.intersects(i)?!e:e),e}collision(t){for(let i=0;i<this.lines.length;i++)if(t.pointInPolygon(new Vector2(this.lines[i].x1,this.lines[i].y1)))return!0;for(let i=0;i<t.lines.length;i++)if(this.pointInPolygon(new Vector2(t.lines[i].x1,t.lines[i].y1)))return!0;return!1}render(t){ctx.fillStyle=t,ctx.beginPath(),ctx.moveTo(this.lines[0].x1,this.lines[0].y1),this.lines.forEach(t=>ctx.lineTo(t.x2,t.y2)),ctx.lineTo(this.lines[0].x1,this.lines[0].y1),ctx.fill(),ctx.closePath()}}
		// rectanglemesh
		class RectangleMesh extends PolygonMesh{constructor(e,c,n=!0){super(n?[new Vector2(-e/2,-c/2),new Vector2(e/2,-c/2),new Vector2(e/2,c/2),new Vector2(-e/2,c/2)]:[new Vector2(0,0),new Vector2(e,0),new Vector2(e,c),new Vector2(0,c)])}}
		// line
		class Line{constructor(i,t){this.point1=i,this.point2=t,this.x1=i.x,this.y1=i.y,this.x2=t.x,this.y2=t.y}pointOnLine(i){let t=(this.y2-this.y1)/(this.x2-this.x1),s=this.y1-t*this.x1;return i.y===t*i.x+s}pointInLine(i){return this.x1<this.x2?this.y1<this.y2?this.pointOnLine(i)&&i.x>=this.x1&&i.x<=this.x2&&i.y>=this.y1&&i.y<=this.y2:this.pointOnLine(i)&&i.x>=this.x1&&i.x<=this.x2&&i.y>=this.y2&&i.y<=this.y1:this.y1<this.y2?this.pointOnLine(i)&&i.x>=this.x2&&i.x<=this.x1&&i.y>=this.y1&&i.y<=this.y2:this.pointOnLine(i)&&i.x>=this.x2&&i.x<=this.x1&&i.y>=this.y2&&i.y<=this.y1}intersects(i){if(this.pointInLine(i.point1)||this.pointInLine(i.point2))return!0;let t=(this.x2-this.x1)*(i.y2-i.y1)-(i.x2-i.x1)*(this.y2-this.y1);if(0===t)return!1;let s=((i.y2-i.y1)*(i.x2-this.x1)+(i.x1-i.x2)*(i.y2-this.y1))/t,h=((this.y1-this.y2)*(i.x2-this.x1)+(this.x2-this.x1)*(i.y2-this.y1))/t;return s>0&&s<1&&h>0&&h<1}}
		// vector2
		class Vector2{constructor(t,s){this.x=t,this.y=s}toString(){return this.x+", "+this.y}getX(){return this.x}getY(){return this.y}setX(t){this.x=t}setY(t){this.y=t}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}mult(t){this.x*=t.x,this.y*=t.y}div(t){this.x/=t.x,this.y/=t.y}dist(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))}dot(t){return this.x*t.x+this.y*t.y}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return[this.x/t,this.y/t]}array(){return[this.x,this.y]}static dist(t,s){return Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))}static dot(t,s){return t.x*s.x+t.y*s.y}static array(t){return[t.x,t.y]}static Zero(){return new Vector2(0,0)}}
		// dirtmound
		const DirtMound=(e,t)=>new GameObject(e,t,new PolygonMesh([new Vector2(0,-10),new Vector2(-10,0),new Vector2(10,0)]),function(){ctx.beginPath(),ctx.fillStyle="Sienna",ctx.moveTo(this.x-25,this.y),ctx.bezierCurveTo(this.x,this.y-25,this.x,this.y-25,this.x+25,this.y),ctx.fill(),ctx.closePath(),this.stage>0&&(ctx.beginPath(),ctx.fillStyle="brown",ctx.ellipse(this.x,this.y-20,3,5,0,0,2*Math.PI),ctx.fill(),ctx.closePath()),2===this.stage&&(ctx.fillStyle="rgb(138, 81, 81)",ctx.fillRect(this.x-1,this.y-30,2,8),ctx.beginPath(),ctx.fillStyle="rgb(16, 181, 36)",ctx.translate(this.x,this.y-32),ctx.rotate(-15),ctx.ellipse(-2,0,1,4,0,0,2*Math.PI),ctx.rotate(30),ctx.ellipse(2,0,1,4,0,0,2*Math.PI),ctx.rotate(-15),ctx.fill(),ctx.closePath(),ctx.translate(-this.x,-(this.y-32)))},function(){this.stage=0,this.name="dirt mound"},function(){(Input.mouseDown||Input[32])&&scenes[1].gameObjects[scenes[1].gameObjects.length-1].holdingItem&&"seed"===scenes[1].gameObjects[scenes[1].gameObjects.length-1].item.name&&dist(this.x,this.y,scenes[1].gameObjects[scenes[1].gameObjects.length-1].x,scenes[1].gameObjects[scenes[1].gameObjects.length-1].y)<30&&0===this.stage?(scenes[1].gameObjects[scenes[1].gameObjects.length-1].holdingItem=!1,scenes[1].gameObjects[scenes[1].gameObjects.length-1].item=null,this.stage=1):(Input.mouseDown||Input[32])&&scenes[1].gameObjects[scenes[1].gameObjects.length-2].holdingItem&&"watering can"===scenes[1].gameObjects[scenes[1].gameObjects.length-2].item.name&&dist(this.x,this.y,scenes[1].gameObjects[scenes[1].gameObjects.length-2].x,scenes[1].gameObjects[scenes[1].gameObjects.length-2].y)<30&&1===this.stage&&(this.stage=2)});
		// seed
		const Seed=(e,t)=>new GameObject(e,t,new PolygonMesh([new Vector2(0,-5),new Vector2(2,0),new Vector2(0,5),new Vector2(-2,0)]),function(){ctx.beginPath(),ctx.fillStyle="brown",ctx.ellipse(this.x,this.y,2,5,0,0,2*Math.PI),ctx.fill(),ctx.closePath()},function(){this.name="seed",this.layer=2},function(){});
		// rubbish
		function Rubbish(e,t,s){switch(s){case 1:return new GameObject(e,t,new RectangleMesh(40,10,!0),function(){ctx.beginPath(),ctx.fillStyle="rgb(0, 196, 255)",ctx.rect(this.x-10,this.y-25,20,50),ctx.ellipse(this.x,this.y-25,10,10,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="rgb(0, 145, 255)",ctx.rect(this.x-3,this.y-38,6,4),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="rgb(255, 255, 255)",ctx.ellipse(this.x,this.y-10,10,1,0,0,2*Math.PI),ctx.ellipse(this.x,this.y,10,1,0,0,2*Math.PI),ctx.ellipse(this.x,this.y+10,10,1,0,0,2*Math.PI),ctx.fill(),ctx.closePath()},function(){this.type=s},function(){dist(this.x,this.y,scenes[0].gameObjects[scenes[0].gameObjects.length-3].x,scenes[0].gameObjects[scenes[0].gameObjects.length-3].y)<60&&scenes[0].gameObjects[scenes[0].gameObjects.length-1].item===this&&(Input[32]||Input.mouseDown)&&(scenes[0].gameObjects[scenes[0].gameObjects.length-1].holdingItem=!1,scenes[0].gameObjects[scenes[0].gameObjects.length-1].item=null,scenes[0].gameObjects.splice(scenes[0].gameObjects.indexOf(this),1))},!1);case 2:return new GameObject(e,t,new RectangleMesh(40,10,!0),function(){ctx.beginPath(),ctx.fillStyle="rgb(255, 255, 23)",ctx.strokeStyle="black",ctx.moveTo(this.x+5,this.y-25),ctx.lineTo(this.x-4,this.y-7),ctx.lineTo(this.x-2,this.y+7),ctx.lineTo(this.x+9,this.y+24),ctx.lineTo(this.x+5,this.y+7),ctx.lineTo(this.x+3,this.y-14),ctx.lineTo(this.x+5,this.y-25),ctx.fill(),ctx.stroke(),ctx.closePath()},function(){this.type=s},function(){dist(this.x,this.y,scenes[0].gameObjects[scenes[0].gameObjects.length-2].x,scenes[0].gameObjects[scenes[0].gameObjects.length-2].y)<60&&scenes[0].gameObjects[scenes[0].gameObjects.length-1].item===this&&(Input[32]||Input.mouseDown)&&(scenes[0].gameObjects[scenes[0].gameObjects.length-1].holdingItem=!1,scenes[0].gameObjects[scenes[0].gameObjects.length-1].item=null,scenes[0].gameObjects.splice(scenes[0].gameObjects.indexOf(this),1))},!1);case 3:return new GameObject(e,t,new RectangleMesh(40,10,!0),function(){ctx.beginPath(),ctx.fillStyle="black",ctx.ellipse(this.x,this.y+25,3,3,0,0,2*Math.PI),ctx.rect(this.x-3,this.y-25,6,50),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="rgb(66, 66, 66)",ctx.ellipse(this.x,this.y-25,3,3,0,0,2*Math.PI),ctx.fill(),ctx.closePath()},function(){this.type=s},function(){dist(this.x,this.y,scenes[0].gameObjects[scenes[0].gameObjects.length-4].x,scenes[0].gameObjects[scenes[0].gameObjects.length-4].y)<60&&scenes[0].gameObjects[scenes[0].gameObjects.length-1].item===this&&(Input[32]||Input.mouseDown)&&(scenes[0].gameObjects[scenes[0].gameObjects.length-1].holdingItem=!1,scenes[0].gameObjects[scenes[0].gameObjects.length-1].item=null,scenes[0].gameObjects.splice(scenes[0].gameObjects.indexOf(this),1))},!1)}}
		// update
		function Update(){if("windy stretch"===scene)""===text&&(!1===timer?(timer=!0,startTime=Date.now()):currentTime()>=6e4?(timer=!1,endTime=Date.now(),4===scenes[0].gameObjects.length?(text="Good work!\nYou cleaned up all the rubbish in under 60 seconds!\n(Press any key to continue)",tasks[0]=!0):scenes[0].gameObjects.length<=14?(scenes[0].started=!1,text="So close!\nYou almost got all the rubbish cleaned up. I'm sure you'll nail this task next time!\n(Press any key to continue)"):(scenes[0].started=!1,text="Bad luck.\nYou didn't manage to clean up all the rubbish in time, but you can always try again!\n(Press any key to continue)"),scene="map"):4===scenes[0].gameObjects.length&&(timer=!1,endTime=Date.now(),text="Good work!\nYou cleaned up all the rubbish in under 60 seconds!\n(Press any key to continue)",tasks[0]=!0,scene="map"),!1===scenes[0].started&&(repeat(function(){scenes[0].gameObjects.push(Rubbish(Math.floor(Math.random()*(clamp(canvas.width,400,700)-50))-clamp(canvas.width,400,700)/2+25,clamp(Math.floor(Math.random()*clamp(canvas.height,300,350))-clamp(canvas.height,300,350)/2,-canvas.height/2+120+Math.floor(50*Math.random()),clamp(canvas.height/2,300,350)),Math.ceil(3*Math.random())))},15),scenes[0].start()),scenes[0].update());else if("palm tree clearing"===scene){scenes[1].started||(scenes[1].gameObjects.push(DirtMound(-45,-30),DirtMound(-115,40),DirtMound(18,30),DirtMound(62,70),DirtMound(-20,90)),scenes[1].start()),scenes[1].update();let e=!0;for(let t=0;t<scenes[1].gameObjects.length;t++)if("dirt mound"===scenes[1].gameObjects[t].name&&2!==scenes[1].gameObjects[t].stage){e=!1;break}e&&(scene="map",tasks[1]=!0,text="Good work!\nYou planted and watered five palm trees, soon the Palm Tree Clearing will be a grove once more!\n(Press any key to continue)")}else"cozy cabin"===scene&&(scenes[2].started||scenes[2].start(),scenes[2].update(),!1===scenes[2].gameObjects[0].on&&!1===scenes[2].gameObjects[1].on&&!1===scenes[2].gameObjects[2].on&&!1===scenes[2].gameObjects[3].on&&(scenes[2].started=!1,text="Good work!\nYou managed to turn off all the lights!\n(Press any key to continue)",tasks[2]=!0,scene="map"))}
		// render
		let titleMessages=["A game","Enter Enviro-land","The Earth is what we all have in common. — Wendell Berry","This feature was made before the game was titled!","By MattDESTROYER","MattDESTROYER was the first nickname I ever used for MineCraft","Developed by Matthew James","Pure HTML, CSS and JavaScript!","1 HTML file and 16 JavaScript files...","Made for the KaJam competition, October 2021","The proper use of science is not to conquer nature but to live in it. — Barry Commoner","Time spent among trees is never time wasted","Most of the source code is minified... sorry","An environmentally concious game","Go plant some trees","I see trees of green... red roses to... What a wonderful world!","Why not spend some time outside?","Reuse bags, don't waste","Turn off lights when they aren't being used","Renewable energy is better for the environment"],titleMessage=0;const randomTitleMessage=t=>titleMessage=Math.floor(Math.random()*titleMessages.length);function timedMessageChange(){window.setTimeout(function(){randomTitleMessage(),"title"===scene&&timedMessageChange()},5e3)}function palmTree(t,e){ctx.beginPath(),ctx.translate(t,e),ctx.fillStyle="rgb(138, 81, 81)",ctx.moveTo(-5,0),ctx.bezierCurveTo(-3,-100,3,-100,5,0),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="rgb(16, 181, 36)",ctx.moveTo(-2,-68),ctx.lineTo(-21,-83),ctx.lineTo(-47,-93),ctx.lineTo(-17,-86),ctx.lineTo(-1,-75),ctx.lineTo(-2,-68),ctx.lineTo(-21,-110),ctx.lineTo(-47,-118),ctx.lineTo(-17,-116),ctx.lineTo(-1,-77),ctx.lineTo(2,-68),ctx.lineTo(21,-99),ctx.lineTo(47,-118),ctx.lineTo(17,-105),ctx.lineTo(-1,-77),ctx.lineTo(2,-68),ctx.lineTo(21,-120),ctx.lineTo(47,-131),ctx.lineTo(17,-124),ctx.lineTo(-1,-77),ctx.lineTo(-2,-68),ctx.lineTo(-8,-117),ctx.lineTo(-21,-136),ctx.lineTo(-2,-121),ctx.lineTo(-2,-68),ctx.lineTo(6,-110),ctx.lineTo(11,-118),ctx.lineTo(2,-116),ctx.lineTo(-1,-77),ctx.lineTo(-1,-77),ctx.lineTo(2,-68),ctx.lineTo(21,-83),ctx.lineTo(47,-93),ctx.lineTo(17,-86),ctx.lineTo(1,-75),ctx.lineTo(-2,-68),ctx.lineTo(-21,-67),ctx.lineTo(-47,-58),ctx.lineTo(-17,-76),ctx.lineTo(-1,-77),ctx.lineTo(2,-68),ctx.lineTo(21,-62),ctx.lineTo(47,-44),ctx.lineTo(17,-76),ctx.lineTo(1,-77),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="rgb(102, 30, 30)",ctx.ellipse(-9,-71,10,10,0,0,2*Math.PI),ctx.ellipse(13,-65,10,10,0,0,2*Math.PI),ctx.fill(),ctx.translate(-t,-e),ctx.closePath()}function Render(){cursor("default"),ctx.fillStyle="black",ctx.fillRect(0,0,canvas.width,canvas.height),"title"===scene?(ctx.textAlign="center",ctx.font="80px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText("HUGE Heart small Body",Math.floor(canvas.width/2)-3,78+sineWave(4,10)),ctx.fillStyle="white",ctx.fillText("HUGE Heart small Body",Math.floor(canvas.width/2),75+sineWave(4,10)),ctx.font="30px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText(titleMessages[titleMessage],Math.floor(canvas.width/2)-2,132+sineWave(5,10)),ctx.fillStyle="white",ctx.fillText(titleMessages[titleMessage],Math.floor(canvas.width/2),130+sineWave(5,10)),ctx.font="20px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText("(Press any key to start)",Math.floor(canvas.width/2)-2,canvas.height-40+sineWave(5.5,5)),ctx.fillStyle="white",ctx.fillText("(Press any key to start)",Math.floor(canvas.width/2),canvas.height-40+sineWave(5.5,5))):"menu"===scene?(ctx.textAlign="center",ctx.font="60px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText("HUGE Heart small Body",Math.floor(canvas.width/2)-3,68+sineWave(4,10)),ctx.fillStyle="white",ctx.fillText("HUGE Heart small Body",Math.floor(canvas.width/2),65+sineWave(4,10)),ctx.font="40px Trebuchet MS",Input.mouseX>Math.floor(canvas.width/2)-47&&Input.mouseX<Math.floor(canvas.width/2)+47&&Input.mouseY>93+sineWave(5,8)&&Input.mouseY<147+sineWave(5,8)?(cursor("pointer"),ctx.fillStyle="whitesmoke",ctx.fillRect(Math.floor(canvas.width/2)-42,97+sineWave(5,8),85,45),ctx.strokeStyle="whitesmoke",ctx.lineJoin="round",ctx.lineWidth=5,ctx.strokeRect(Math.floor(canvas.width/2)-42,97+sineWave(5,8),85,45),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.fillStyle="gray",ctx.fillText("Play",Math.floor(canvas.width/2)-2,132+sineWave(5,8)),ctx.fillStyle="black",ctx.fillText("Play",Math.floor(canvas.width/2),130+sineWave(5,8))):(ctx.fillStyle="gray",ctx.fillText("Play",Math.floor(canvas.width/2)-2,132+sineWave(5,8)),ctx.fillStyle="white",ctx.fillText("Play",Math.floor(canvas.width/2),130+sineWave(5,8))),Input.mouseX>Math.floor(canvas.width/2)-75&&Input.mouseX<Math.floor(canvas.width/2)+75&&Input.mouseY>163+sineWave(6,7)&&Input.mouseY<217+sineWave(6,7)?(cursor("pointer"),ctx.fillStyle="whitesmoke",ctx.fillRect(Math.floor(canvas.width/2)-70,167+sineWave(6,7),140,45),ctx.strokeStyle="whitesmoke",ctx.lineJoin="round",ctx.lineWidth=5,ctx.strokeRect(Math.floor(canvas.width/2)-70,167+sineWave(6,7),140,45),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.fillStyle="gray",ctx.fillText("Credits",Math.floor(canvas.width/2)-2,202+sineWave(6,7)),ctx.fillStyle="black",ctx.fillText("Credits",Math.floor(canvas.width/2),200+sineWave(6,7))):(ctx.fillStyle="gray",ctx.fillText("Credits",Math.floor(canvas.width/2)-2,202+sineWave(6,7)),ctx.fillStyle="white",ctx.fillText("Credits",Math.floor(canvas.width/2),200+sineWave(6,7)))):"credits"===scene?(ctx.textAlign="center",ctx.font="60px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText("HUGE Heart small Body",Math.floor(canvas.width/2)-3,68+sineWave(4,10)),ctx.fillStyle="white",ctx.fillText("HUGE Heart small Body",Math.floor(canvas.width/2),65+sineWave(4,10)),ctx.font="40px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText("MattDESTROYER (Matthew James)",Math.floor(canvas.width/2)-2,177+sineWave(7,20)),ctx.fillStyle="white",ctx.fillText("MattDESTROYER (Matthew James)",Math.floor(canvas.width/2),175+sineWave(7,20)),ctx.font="20px Trebuchet MS",ctx.fillStyle="gray",ctx.fillText("(Yep, only one dev...)",Math.floor(canvas.width/2)-1,227+sineWave(7,20)),ctx.fillStyle="white",ctx.fillText("(Yep, only one dev...)",Math.floor(canvas.width/2),225+sineWave(7,20)),ctx.font="40px Trebuchet MS",Input.mouseX>Math.floor(canvas.width/2)-54&&Input.mouseX<Math.floor(canvas.width/2)+50&&Input.mouseY>canvas.height-55+sineWave(5,8)&&Input.mouseY<canvas.height+sineWave(5,8)?(cursor("pointer"),ctx.fillStyle="whitesmoke",ctx.fillRect(Math.floor(canvas.width/2)-49,canvas.height-50+sineWave(5,8),94,45),ctx.strokeStyle="whitesmoke",ctx.lineJoin="round",ctx.lineWidth=5,ctx.strokeRect(Math.floor(canvas.width/2)-49,canvas.height-50+sineWave(5,8),94,45),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.fillStyle="gray",ctx.fillText("Menu",Math.floor(canvas.width/2)-2,canvas.height-15+sineWave(5,8)),ctx.fillStyle="black",ctx.fillText("Menu",Math.floor(canvas.width/2),canvas.height-17+sineWave(5,8))):(ctx.fillStyle="gray",ctx.fillText("Menu",Math.floor(canvas.width/2)-2,canvas.height-15+sineWave(5,8)),ctx.fillStyle="white",ctx.fillText("Menu",Math.floor(canvas.width/2),canvas.height-17+sineWave(5,8)))):"map"===scene&&""===text?(ctx.fillStyle="skyblue",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.save(),ctx.translate((canvas.width-canvas.height)/2-50,5),ctx.scale(canvas.height/400,canvas.height/400),ctx.fillStyle="rgb(210, 235, 75)",ctx.moveTo(140,59),ctx.bezierCurveTo(191,15,234,24,292,47),ctx.moveTo(292,47),ctx.bezierCurveTo(469,78,497,227,457,282),ctx.moveTo(457,282),ctx.bezierCurveTo(397,380,337,387,267,363),ctx.moveTo(267,363),ctx.bezierCurveTo(78,379,101,370,58,315),ctx.moveTo(58,315),ctx.bezierCurveTo(2,242,17,208,58,133),ctx.moveTo(58,133),ctx.bezierCurveTo(78,76,101,70,140,59),ctx.moveTo(140,59),ctx.lineTo(292,47),ctx.lineTo(457,282),ctx.lineTo(267,363),ctx.lineTo(58,315),ctx.lineTo(58,133),ctx.lineTo(140,59),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.scale(.8,.8),ctx.translate(50,50),ctx.fillStyle="rgb(105, 235, 75)",ctx.moveTo(140,59),ctx.bezierCurveTo(191,15,234,24,292,47),ctx.moveTo(292,47),ctx.bezierCurveTo(469,78,497,227,457,282),ctx.moveTo(457,282),ctx.bezierCurveTo(397,380,337,387,267,363),ctx.moveTo(267,363),ctx.bezierCurveTo(78,379,101,370,58,315),ctx.moveTo(58,315),ctx.bezierCurveTo(2,242,17,208,58,133),ctx.moveTo(58,133),ctx.bezierCurveTo(78,76,101,70,140,59),ctx.moveTo(140,59),ctx.lineTo(292,47),ctx.lineTo(457,282),ctx.lineTo(267,363),ctx.lineTo(58,315),ctx.lineTo(58,133),ctx.lineTo(140,59),ctx.fill(),ctx.restore(),ctx.closePath(),ctx.save(),ctx.translate((canvas.width-canvas.height)/2-50,5),ctx.scale(canvas.height/800,canvas.height/800),palmTree(300,220),palmTree(350,240),palmTree(280,260),palmTree(370,280),palmTree(325,300),palmTree(260,310),ctx.restore(),ctx.save(),ctx.translate((canvas.width-canvas.height)/2-50,5),ctx.scale(canvas.height/1500,canvas.height/1500),ctx.fillStyle="rgb(105, 35, 0)",ctx.fillRect(1e3,650,200,200),ctx.fillStyle="rgb(90, 35, 0)",ctx.fillRect(980,650,220,20),ctx.fillRect(1e3,675,220,20),ctx.fillRect(980,700,220,20),ctx.fillRect(1e3,725,220,20),ctx.fillRect(980,750,220,20),ctx.fillRect(1e3,775,220,20),ctx.fillRect(980,800,220,20),ctx.fillRect(1e3,825,220,20),ctx.beginPath(),ctx.fillStyle="rgb(90, 35, 0)",ctx.ellipse(990,685,10,10,0,0,2*Math.PI),ctx.ellipse(990,735,10,10,0,0,2*Math.PI),ctx.ellipse(990,785,10,10,0,0,2*Math.PI),ctx.ellipse(990,835,10,10,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="rgb(90, 35, 0)",ctx.ellipse(1210,660,10,10,0,0,2*Math.PI),ctx.ellipse(1210,710,10,10,0,0,2*Math.PI),ctx.ellipse(1210,760,10,10,0,0,2*Math.PI),ctx.ellipse(1210,810,10,10,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.fillStyle="black",ctx.fillRect(1075,750,50,100),ctx.restore(),ctx.beginPath(),ctx.save(),ctx.translate((canvas.width-canvas.height)/2-50,5),ctx.scale(canvas.height/400,canvas.height/400),ctx.fillStyle="white",ctx.strokeStyle="white",ctx.textAlign="left",ctx.font="14px Trebuchet MS",tasks[2]||(ctx.moveTo(300,220),ctx.lineTo(320,165),ctx.lineTo(520,165),Input.mouseX>320*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseX<527*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseY>145*canvas.height/400+5&&Input.mouseY<165*canvas.height/400+5?(cursor("pointer"),ctx.fillStyle="white",ctx.fillRect(320,146,207,20),ctx.fillStyle="black"):ctx.fillStyle="white",ctx.fillText("Turn off the lights at Cozy Cabin",323,160)),tasks[1]||(ctx.moveTo(180,100),ctx.lineTo(200,45),ctx.lineTo(407,45),Input.mouseX>200*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseX<413*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseY>25*canvas.height/400+5&&Input.mouseY<45*canvas.height/400+5?(cursor("pointer"),ctx.fillStyle="white",ctx.fillRect(200,26,213,20),ctx.fillStyle="black"):ctx.fillStyle="white",ctx.fillText("Plant trees at Palm Tree Clearing",203,40)),tasks[0]||(ctx.moveTo(125,350),ctx.lineTo(145,255),ctx.lineTo(350,255),Input.mouseX>145*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseX<355*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseY>236*canvas.height/400+5&&Input.mouseY<256*canvas.height/400+5?(cursor("pointer"),ctx.fillStyle="white",ctx.fillRect(145,236,210,20),ctx.fillStyle="black"):ctx.fillStyle="white",ctx.fillText("Pick up rubbish at Windy Stretch",150,250)),ctx.stroke(),ctx.restore(),ctx.closePath()):"windy stretch"===scene?(ctx.save(),ctx.fillStyle="skyblue",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.fillStyle="rgb(210, 235, 75)",ctx.scale(.25+canvas.height/400,.25+canvas.height/400),ctx.moveTo(0,201),ctx.bezierCurveTo(41,362,53,363,400,400),ctx.lineTo(canvas.width,0),ctx.lineTo(0,0),ctx.lineTo(0,201),ctx.fill(),ctx.closePath(),ctx.restore(),scenes[0].render()):"cozy cabin"===scene?scenes[2].render():"palm tree clearing"===scene&&(ctx.fillStyle="lightgreen",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.translate((canvas.width-canvas.height)/2-50,5),ctx.scale(canvas.height/400,canvas.height/400),palmTree(100,150),palmTree(455,180),palmTree(410,330),ctx.restore(),scenes[1].render()),timer&&(ctx.font="20px Trebuchet MS",ctx.textAlign="left",ctx.fillStyle="white",ctx.fillText(currentTime()/1e3,10,30)),text.length>1&&(ctx.fillStyle="grey",ctx.fillRect(15,15,canvas.width-30,canvas.height-30),ctx.fillStyle="black",ctx.fillRect(20,20,canvas.width-40,canvas.height-40),ctx.fillStyle="white",ctx.textAlign="left",ctx.font="15px Trebuchet MS",getLines(text,canvas.width-60).forEach((t,e)=>{-1!==t.indexOf("(Press any key to continue)")?ctx.fillStyle="red":ctx.fillStyle="white",ctx.fillText(t,30,40+17*e)}))}randomTitleMessage(),timedMessageChange();
	</script>
</head>

<body></body>

<script type="text/javascript">
	// init
	let canvas=(document.body||document.getElementsByTagName("body")[0]).appendChild(document.createElement("canvas")),ctx=canvas.getContext("2d",{alpha:!1});canvas.width=window.innerWidth,canvas.height=window.innerHeight;let startTime,endTime,scene="title",Input={},scenes=[new Scene([new GameObject(0,0,new PolygonMesh([new Vector2(-20,0),new Vector2(-14,-14),new Vector2(0,-20),new Vector2(14,-14),new Vector2(20,0),new Vector2(14,14),new Vector2(0,20),new Vector2(-14,14)]),function(){ctx.beginPath(),ctx.fillStyle="peru",ctx.ellipse(this.x,this.y,20,20,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.translate(this.x,this.y),ctx.rotate(angleToMouse(this.x+canvas.width/2,this.y+canvas.height/2,!1)),ctx.ellipse(20,20,5,5,0,0,2*Math.PI),ctx.ellipse(20,-20,5,5,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.rotate(-angleToMouse(this.x+canvas.width/2,this.y+canvas.height/2,!1)),ctx.translate(-this.x,-this.y)},function(){this.layer=3,this.holdingItem=!1,this.item=null},function(){if((Input.W||Input.ARROWUP)&&this.changeY(-4),(Input.S||Input.ARROWDOWN)&&this.changeY(4),(Input.A||Input.ARROWLEFT)&&this.changeX(-4),(Input.D||Input.ARROWRIGHT)&&this.changeX(4),this.x-20<-canvas.width/2&&(this.x=-canvas.width/2+20),this.x+20>canvas.width/2&&(this.x=canvas.width/2-20),this.y-20<-canvas.height/2&&(this.y=-canvas.height/2+20),this.y+20>canvas.height/2&&(this.y=canvas.height/2-20),this.holdingItem)this.item.x=this.x,this.item.y=this.y;else{let t=scenes[0].gameObjects;for(let e=0;e<t.length-4;e++)if(dist(this.x,this.y,t[e].x,t[e].y)<=30&&(Input[32]||Input.mouseDown)){this.holdingItem=!0,this.item=t[e];break}}},!0),new GameObject(-100,-canvas.height/2+50,new RectangleMesh(55,55),function(){ctx.fillStyle=ctx.strokeStyle="red",ctx.lineJoin="round",ctx.lineWidth=5,ctx.strokeRect(this.x-25,this.y-25,50,50),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.fillRect(this.x-25,this.y-25,50,50)},function(){this.layer=2},function(){},!0),new GameObject(0,-canvas.height/2+50,new RectangleMesh(55,55),function(){ctx.fillStyle=ctx.strokeStyle="yellow",ctx.lineJoin="round",ctx.lineWidth=5,ctx.strokeRect(this.x-25,this.y-25,50,50),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.fillRect(this.x-25,this.y-25,50,50)},function(){this.layer=2},function(){},!0),new GameObject(100,-canvas.height/2+50,new RectangleMesh(55,55),function(){ctx.fillStyle=ctx.strokeStyle="green",ctx.lineJoin="round",ctx.lineWidth=5,ctx.strokeRect(this.x-25,this.y-25,50,50),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.fillRect(this.x-25,this.y-25,50,50)},function(){this.layer=2},function(){},!0)],new Camera(0,0)),new Scene([new GameObject(0,0,new PolygonMesh([new Vector2(-20,0),new Vector2(-14,-14),new Vector2(0,-20),new Vector2(14,-14),new Vector2(20,0),new Vector2(14,14),new Vector2(0,20),new Vector2(-14,14)]),function(){ctx.beginPath(),ctx.fillStyle="peru",ctx.ellipse(this.x,this.y,20,20,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.translate(this.x,this.y),ctx.rotate(angleToMouse(this.x+canvas.width/2,this.y+canvas.height/2,!1)),ctx.ellipse(20,20,5,5,0,0,2*Math.PI),ctx.ellipse(20,-20,5,5,0,0,2*Math.PI),this.holdingItem&&"seed"===this.item.name&&(ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="brown",ctx.ellipse(30,0,5,3,0,0,2*Math.PI)),ctx.fill(),ctx.closePath(),ctx.rotate(-angleToMouse(this.x+canvas.width/2,this.y+canvas.height/2,!1)),ctx.translate(-this.x,-this.y)},function(){this.layer=3,this.holdingItem=!1,this.item=null},function(){(Input.W||Input.ARROWUP)&&this.changeY(-4),(Input.S||Input.ARROWDOWN)&&this.changeY(4),(Input.A||Input.ARROWLEFT)&&this.changeX(-4),(Input.D||Input.ARROWRIGHT)&&this.changeX(4),this.x-20<-canvas.width/2&&(this.x=-canvas.width/2+20),this.x+20>canvas.width/2&&(this.x=canvas.width/2-20),this.y-20<-canvas.height/2&&(this.y=-canvas.height/2+20),this.y+20>canvas.height/2&&(this.y=canvas.height/2-20),this.holdingItem&&(this.item.x=this.x,this.item.y=this.y)},!0),new GameObject(-50,-125,new RectangleMesh(45,45),function(){1===this.itemType?(ctx.fillStyle="DarkKhaki",ctx.strokeStyle="DarkKhaki",ctx.fillRect(this.x-20,this.y-20,40,40),ctx.lineWidth=5,ctx.lineJoin="round",ctx.strokeRect(this.x-20,this.y-20,40,40),ctx.lineJoin="miter",ctx.lineWidth=1,ctx.beginPath(),ctx.fillStyle="brown",ctx.ellipse(this.x,this.y+2,3,6,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.font="12px Trebuchet MS",ctx.textAlign="center",ctx.fillStyle="black",ctx.fillText("Seeds",this.x,this.y-8)):(ctx.beginPath(),ctx.strokeStyle="rgb(215, 220, 15)",ctx.lineWidth=3,ctx.moveTo(this.x-15,this.y-15),ctx.bezierCurveTo(this.x-10,this.y-30,this.x+10,this.y-30,this.x+15,this.y-15),ctx.stroke(),ctx.closePath(),ctx.lineWidth=1,ctx.fillStyle="rgb(215, 220, 15)",ctx.beginPath(),ctx.ellipse(this.x-35,this.y-28,1,5,0,0,2*Math.PI),ctx.ellipse(this.x,this.y+15,15,4,0,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.fillRect(this.x-15,this.y-15,30,30),ctx.beginPath(),ctx.moveTo(this.x-35,this.y-28),ctx.lineTo(this.x-15,this.y-10),ctx.lineTo(this.x-15,this.y-5),ctx.lineTo(this.x-35,this.y-28),ctx.fill(),ctx.closePath())},function(){this.itemType=1,this.name="seed bag"},function(){if(1===this.itemType){dist(this.x,this.y,scenes[1].gameObjects[scenes[1].gameObjects.length-1].x,scenes[1].gameObjects[scenes[1].gameObjects.length-1].y)<60&&!scenes[1].gameObjects[scenes[1].gameObjects.length-1].holdingItem&&(Input.mouseDown||Input[32])&&(scenes[1].gameObjects[scenes[1].gameObjects.length-1].holdingItem=!0,scenes[1].gameObjects[scenes[1].gameObjects.length-1].item=Seed(0,0),scenes[1].gameObjects[scenes[1].gameObjects.length-1].item.start());let t=!0;for(let e=0;e<scenes[1].gameObjects.length;e++)if("dirt mound"===scenes[1].gameObjects[e].name&&0===scenes[1].gameObjects[e].stage){t=!1;break}t&&(this.itemType=2,this.name="watering can",this.layer=4,this.collides=!1)}else(Input.mouseDown||Input[32])&&dist(this.x,this.y,scenes[1].gameObjects[scenes[1].gameObjects.length-2].x,scenes[1].gameObjects[scenes[1].gameObjects.length-2].y)<40&&(scenes[1].gameObjects[scenes[1].gameObjects.length-2].holdingItem=!0,scenes[1].gameObjects[scenes[1].gameObjects.length-2].item=this)},!0)],new Camera(0,0)),new Scene([new GameObject(3*-canvas.width/8,0,new RectangleMesh(300,300),function(){ctx.fillStyle="white",ctx.fillRect(this.x-canvas.width/8,this.y-canvas.width/8,canvas.width/4,canvas.width/4),ctx.beginPath(),ctx.strokeStyle="black",ctx.rect(this.x-30,this.y-50,60,100),ctx.moveTo(this.x-30,this.y),ctx.lineTo(this.x+30,this.y),ctx.stroke(),ctx.closePath(),ctx.textAlign="center",ctx.font="20px Trebuchet MS",this.on?(ctx.fillStyle="rgb(72, 255, 0)",ctx.fillRect(this.x-30,this.y-50,60,50),ctx.fillStyle="black",ctx.fillText("ON",this.x,this.y-25)):(ctx.fillStyle="red",ctx.fillRect(this.x-30,this.y,60,50),ctx.fillStyle="black",ctx.fillText("OFF",this.x,this.y+25))},function(){this.on=!0},function(){},!1),new GameObject(-canvas.width/8,0,new RectangleMesh(300,300),function(){ctx.fillStyle="white",ctx.fillRect(this.x-canvas.width/8,this.y-canvas.width/8,canvas.width/4,canvas.width/4),ctx.beginPath(),ctx.strokeStyle="black",ctx.rect(this.x-30,this.y-50,60,100),ctx.moveTo(this.x-30,this.y),ctx.lineTo(this.x+30,this.y),ctx.stroke(),ctx.closePath(),ctx.textAlign="center",ctx.font="20px Trebuchet MS",this.on?(ctx.fillStyle="rgb(72, 255, 0)",ctx.fillRect(this.x-30,this.y-50,60,50),ctx.fillStyle="black",ctx.fillText("ON",this.x,this.y-25)):(ctx.fillStyle="red",ctx.fillRect(this.x-30,this.y,60,50),ctx.fillStyle="black",ctx.fillText("OFF",this.x,this.y+25))},function(){this.on=!0},function(){},!1),new GameObject(canvas.width/8,0,new RectangleMesh(300,300),function(){ctx.fillStyle="white",ctx.fillRect(this.x-canvas.width/8,this.y-canvas.width/8,canvas.width/4,canvas.width/4),ctx.beginPath(),ctx.strokeStyle="black",ctx.rect(this.x-30,this.y-50,60,100),ctx.moveTo(this.x-30,this.y),ctx.lineTo(this.x+30,this.y),ctx.stroke(),ctx.closePath(),ctx.textAlign="center",ctx.font="20px Trebuchet MS",this.on?(ctx.fillStyle="rgb(72, 255, 0)",ctx.fillRect(this.x-30,this.y-50,60,50),ctx.fillStyle="black",ctx.fillText("ON",this.x,this.y-25)):(ctx.fillStyle="red",ctx.fillRect(this.x-30,this.y,60,50),ctx.fillStyle="black",ctx.fillText("OFF",this.x,this.y+25))},function(){this.on=!0},function(){},!1),new GameObject(3*canvas.width/8,0,new RectangleMesh(300,300),function(){ctx.fillStyle="white",ctx.fillRect(this.x-canvas.width/8,this.y-canvas.width/8,canvas.width/4,canvas.width/4),ctx.beginPath(),ctx.strokeStyle="black",ctx.rect(this.x-30,this.y-50,60,100),ctx.moveTo(this.x-30,this.y),ctx.lineTo(this.x+30,this.y),ctx.stroke(),ctx.closePath(),ctx.textAlign="center",ctx.font="20px Trebuchet MS",this.on?(ctx.fillStyle="rgb(72, 255, 0)",ctx.fillRect(this.x-30,this.y-50,60,50),ctx.fillStyle="black",ctx.fillText("ON",this.x,this.y-25)):(ctx.fillStyle="red",ctx.fillRect(this.x-30,this.y,60,50),ctx.fillStyle="black",ctx.fillText("OFF",this.x,this.y+25))},function(){this.on=!0},function(){},!1)],new Camera(0,0))],currentScene=0,locations=["windy stretch","palm tree clearing","cozy cabin"],tasks=[!1,!1,!1],text="",timer=!1;
	// input
	document.addEventListener("keydown",function(e){e=e||window.event,Input[e.keyCode]=!0,Input[e.key.toString().toUpperCase()]=!0,Input.keyCode=e.keyCode,Input.key=e.key.toString(),text.indexOf("(Press any key to continue)")>-1&&(text="","final message"===scene?(scene="message from the developer",text="\"Playing this game, I hope you've learned some valuable lessons. You now know some simple ways to help make our planet greener. You can pickup rubbish, turn off lights that aren't being used, and plant trees. These may seem like small, inconsequencial, actions, but they really do add up. Your small actions have a HUGE impact on what our tomorrow will look like. This is a message told by many people, environmentalists, scientists, even Pope Francis, and now we turn to you. Will you join the fight to keep our planet clean?\"\n\nMatthew James, 2021"):0===tasks.filter(e=>!e).length&&(scene="final message",text="Thanks for all your help! Because of you Enviro-land is greener than ever! This time we will limit the number of people who can vist the island at a time to ensure the island stays as beautiful as you're leaving it. Bye for now, I hope I'll see you again soon!\n(Press any key to continue)"))}),document.addEventListener("keyup",function(e){e=e||window.event,Input[e.keyCode]=!1,Input[e.key.toString().toUpperCase()]=!1}),document.addEventListener("keypress",function(){"title"===scene&&(scene="menu")}),document.addEventListener("mousedown",function(e){e=e||window.event,Input.buttons=e.buttons,Input.button=e.button,Input.mouseDown=!0}),document.addEventListener("mouseup",function(e){e=e||window.event,Input.buttons=e.buttons,Input.button=e.button,Input.mouseDown=!1}),document.addEventListener("click",function(){"title"===scene?scene="menu":"menu"===scene?Input.mouseX>Math.floor(canvas.width/2)-47&&Input.mouseX<Math.floor(canvas.width/2)+47&&Input.mouseY>93+sineWave(5,8)&&Input.mouseY<147+sineWave(5,8)?(scene="map",text="Hello fellow environmentalist, welcome to Enviro-land. You're the first person on the green team to visit this island in many years! Why? You're probably wondering. Well, it's a HUGE story. It starts a few years ago...\nThe island was beautiful. We environmentalists kept the place cleaner than it had ever been before. The island was a place to recconect with the earth and experience nature's beauty. Then the word got out. Soon tourists came from all over the globe to visit Enviro-land. We were heavily outnumbered... We never stood a chance... The tourists destroyed our work with their litter and wasteful ways. The island hasn't been the same since... But that's all going to change, because now you're here! Thank you for volunteering to help us clean up Enviro-land! It's a HUGE job, and you're only one small person, but I think you can handle it. Let's get started! Here is a map of the island showing the locations of clean up tasks.\n(Press any key to continue)"):Input.mouseX>Math.floor(canvas.width/2)-75&&Input.mouseX<Math.floor(canvas.width/2)+75&&Input.mouseY>163+sineWave(5,8)&&Input.mouseY<217+sineWave(5,8)&&(scene="credits"):"credits"===scene?Input.mouseX>Math.floor(canvas.width/2)-54&&Input.mouseX<Math.floor(canvas.width/2)+50&&Input.mouseY>canvas.height-55+sineWave(5,8)&&Input.mouseY<canvas.height+sineWave(5,8)&&(scene="menu"):"map"===scene&&""===text?!tasks[0]&&Input.mouseX>145*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseX<355*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseY>236*canvas.height/400+5&&Input.mouseY<256*canvas.height/400+5?(scene="windy stretch",text="Pick up plastic at Windy Stretch\nThank goodness you got here, windy stretch is a mess! We need you to pick up all the rubbish and put it in the correct bin. Remember: green is for food scraps/grown items like bananas, yellow is for recyclables like platic bottles, and red is for rubbish like straws.\n\nGOAL: Pick up all the waste and put it in the correct bin in under a minute!\n\nUse the arrow keys and/or W, A, S, and D to move, press space or click to interact. You can only carry one item at a time.\n(Press any key to continue)",currentScene=0):!tasks[1]&&Input.mouseX>200*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseX<413*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseY>25*canvas.height/400+5&&Input.mouseY<45*canvas.height/400+5?(scene="palm tree clearing",text="Plant trees at Palm Tree Clearing\nThank goodness you got here! What was once Palm Tree Grove, has become Palm Tree Clearing. There aren't enough palm trees here. Can you help plant and water 5 palm trees?\n\nGOAL: Plant and water 5 palm trees.\n\nUse the arrow keys and/or W, A, S, and D to move, press space or click to interact. Go to the bag of seeds (and interact with it) to pick up a seed (you can only carry one seed at a time.), then take them to the mounds of dirt (and interact with them) to plant. Once you've planted five seeds you will see a watering can which you can use to water them (by interacting with the planted seeds).\n(Press any key to continue)",currentScene=1):!tasks[2]&&Input.mouseX>320*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseX<527*canvas.height/400+(canvas.width-canvas.height)/2-50&&Input.mouseY>145*canvas.height/400+5&&Input.mouseY<165*canvas.height/400+5&&(scene="cozy cabin",text="Turn off the lights at Cozy Cabin\nThank goodness you made it here! All the lights are on in cozy cabin but no one is using them. It's wasting lots of electricity. Something is wrong with the switches though, flicking one can also affect another, can you find the right order to turn them off?\n\nGOAL: Turn off all the lights.\n\nClick the switch on a light to flick it.\n(Press any key to continue)",currentScene=2):"cozy cabin"===scene&&""===text&&(Input.mouseX>-canvas.width/8*3-25+canvas.width/2&&Input.mouseX<-canvas.width/8*3+25+canvas.width/2&&Input.mouseY>canvas.height/2-50&&Input.mouseY<50+canvas.height/2?(scenes[2].gameObjects[0].on=!scenes[2].gameObjects[0].on,scenes[2].gameObjects[1].on=!scenes[2].gameObjects[1].on):Input.mouseX>-canvas.width/8-25+canvas.width/2&&Input.mouseX<-canvas.width/8+25+canvas.width/2&&Input.mouseY>canvas.height/2-50&&Input.mouseY<50+canvas.height/2?(scenes[2].gameObjects[1].on=!scenes[2].gameObjects[1].on,scenes[2].gameObjects[3].on=!scenes[2].gameObjects[3].on):Input.mouseX>canvas.width/8-25+canvas.width/2&&Input.mouseX<canvas.width/8+25+canvas.width/2&&Input.mouseY>canvas.height/2-50&&Input.mouseY<50+canvas.height/2?(scenes[2].gameObjects[2].on=!scenes[2].gameObjects[2].on,scenes[2].gameObjects[1].on=!scenes[2].gameObjects[1].on):Input.mouseX>canvas.width/8*3-25+canvas.width/2&&Input.mouseX<canvas.width/8*3+25+canvas.width/2&&Input.mouseY>canvas.height/2-50&&Input.mouseY<50+canvas.height/2&&(scenes[2].gameObjects[3].on=!scenes[2].gameObjects[3].on,scenes[2].gameObjects[1].on=!scenes[2].gameObjects[1].on))}),document.addEventListener("mousemove",function(e){e=e||window.event;let n=canvas.getBoundingClientRect();Input.pmouseX=Input.mouseX,Input.pmouseY=Input.mouseY,Input.mouseX=e.clientX-n.left,Input.mouseY=e.clientY-n.top});
	// main
	let o=Date.now();function loop(){Date.now()-o>15&&(Update(),o=Date.now()),Render(),window.requestAnimationFrame(loop)}window.requestAnimationFrame(loop)
</script>

</html>